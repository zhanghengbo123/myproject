<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="core.admin.dao.GoodsMapper">
    <resultMap id="goodsMapper" type="core.admin.domain.Goods">
        <result column="g_id" property="id"/>
        <result column="g_goods_name" property="goodsName"/>
        <result column="g_goods_pic" property="goodsPic"/>
        <result column="g_goods_price" property="goodsPrice"/>
        <result column="g_goods_unit" property="goodsUnit"/>
        <result column="g_user_id" property="userId"/>
        <result column="g_type_id" property="typeId"/>
        <result column="g_goods_count" property="goodsCount"/>
        <collection property="networkUser" ofType="NetworkUser">
            <result column="u_id" property="id"/>
            <result column="u_username" property="username"/>
            <result column="u_mobile" property="mobile"/>
        </collection>
    </resultMap>

    <!--insert-->
    <insert id="save" parameterType="core.admin.domain.Goods">
        <selectKey resultType="Long" keyProperty="id" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        INSERT INTO <include refid="GOODSTABLE"/>
        (`goods_name`,`goods_desc`,`goods_pic`,`goods_price`,`goods_unit`,`goods_count`,`user_id`,`type_id`)
        VALUES
        (
        #{goodsName},
        #{goodsDesc},
        #{goodsPic},
        #{goodsPrice},
        #{goodsUnit},
        #{goodsCount},
        #{userId},
        #{typeId}
        )
    </insert>

    <sql id = "GOODSTABLE">
        <![CDATA[ goods ]]>
    </sql>
</mapper>